import{j as e,A as N,S as v}from"./sweetalert2.all.BzjA5z2z.js";import{r as c}from"./index.BVOCwoKb.js";/* empty css                       */import{P as C}from"./Paginacion.DN2WiRaF.js";import{m as $}from"./ManejarRespuesta.Bd8-Nm9C.js";function S({filtersLocal:a,clearAllFilters:i,handleFilterChange:t,setFilters:d,rol:p,handleEstadoChange:m}){return e.jsxs("div",{className:"filters-container",children:[e.jsxs("div",{className:"filter-group",children:[e.jsx("h4",{className:"filter-group-title",children:"Tipo de empleo"}),e.jsxs("div",{className:"filter-options",children:[e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"tipo",value:"Vacante",onChange:t,checked:a.tipo==="Vacante"}),e.jsx("span",{children:"Vacantes"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"tipo",value:"Practica",onChange:t,checked:a.tipo==="Practica"}),e.jsx("span",{children:"Practicas"})]})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("h4",{className:"filter-group-title",children:"Experiencia Minima"}),e.jsx("input",{type:"number",min:0,name:"experiencia",onChange:t,value:a.experiencia||"",className:"search-input"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("h4",{className:"filter-group-title",children:"Sueldo Minimo"}),e.jsx("input",{type:"number",name:"sueldo",min:0,onChange:t,value:a.sueldo||"",className:"search-input"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("h4",{className:"filter-group-title",children:"Postulados"}),e.jsx("input",{type:"number",min:0,name:"totalpostulaciones",onChange:t,value:a.totalpostulaciones||"",className:"search-input"})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("h4",{className:"filter-group-title",children:"Modalidad"}),e.jsxs("div",{className:"filter-options",children:[e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"modalidad",value:"Remoto",onChange:t,checked:a.modalidad==="Remoto"}),e.jsx("span",{children:"Remoto"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"modalidad",value:"Presencial",onChange:t,checked:a.modalidad==="Presencial"}),e.jsx("span",{children:"Presencial"})]}),e.jsxs("label",{className:"filter-option",children:[e.jsx("input",{type:"radio",name:"modalidad",value:"Hibrido",onChange:t,checked:a.modalidad==="Hibrido"}),e.jsx("span",{children:"Híbrido"})]})]})]}),p==="empresa"&&e.jsxs("div",{className:"filter-group",children:[e.jsx("h4",{className:"filter-group-title",children:"Estado"}),e.jsxs("select",{name:"estado",value:a.estado,onChange:m,className:"search-input",children:[e.jsx("option",{value:"todas",selected:!0,children:"Todas"}),e.jsx("option",{value:"activas",children:"Activas"}),e.jsx("option",{value:"desactivadasAdmin",children:"Desactivadas por Admin"}),e.jsx("option",{value:"pausadasEmpresa",children:"Pausadas por Empresa"})]})]}),e.jsxs("div",{className:"filter-group",children:[e.jsx("h4",{className:"filter-group-title",children:"Cargo"}),e.jsx("input",{type:"text",name:"cargo",onChange:t,value:a.cargo||"",className:"search-input"})]}),e.jsx("button",{className:"btn btn-primary filter-search-button",onClick:()=>{i(),d({titulo:null,tipo:"todos",experiencia:null,modalidad:null,cargo:null,isActive:null,activaPorEmpresa:null,ciudad:null,sueldo:null,totalpostulaciones:null})},children:"Eliminar filtros"})]})}const A=({jobs:a,rol:i,setCurrentPage:t,currentPage:d,totalPages:p,fetchAllJobs:m})=>{async function j(s,h){let u=h?"activar":"desactivar";const{isConfirmed:x}=await v.fire({title:"Confirmar acción",text:`¿Estás seguro de que deseas ${u} esta vacante?`,icon:"question",showCancelButton:!0,confirmButtonText:"Sí, continuar",cancelButtonText:"Cancelar",reverseButtons:!0});if(x)try{(await fetch(`${N}/api/vacantes/estado/${s}?estado=${h}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include"})).ok?(await v.fire({text:`Exito al ${u} la vacante`,icon:"success"}),m()):await v.fire({text:`Error al ${u} la vacante.`,icon:"error"})}catch(l){console.error("Error en la solicitud:",l),await v.fire({text:"Hubo un problema al intentar eliminar la vacante.",icon:"error"})}}return a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-96 text-center p-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-2",children:"No se encontraron resultados"}),e.jsx("p",{className:"text-gray-500",children:"Intenta cambiar los filtros o revisar tu búsqueda."})]}):e.jsxs("div",{children:[e.jsx("div",{className:"jobs-grid",children:a.map(s=>e.jsxs("div",{className:"card",children:[e.jsxs("a",{href:`/empleos/${s.nvacantes}`,children:[e.jsxs("div",{className:"header",children:[e.jsx("div",{className:"logo",children:e.jsx("img",{src:s.imagenEmpresa?`${N}/img/`+s.imagenEmpresa:`${N}/images/imgEmpresa.png`,alt:`${s.nameEmpresa} logo`,width:"60",height:"60"})}),e.jsxs("div",{className:"info",children:[!s.active&&e.jsx("span",{className:" top-4 left-4 bg-red-600 text-white text-xs font-semibold px-2 py-1 rounded-full shadow-md",children:i==="empresa"?"Desactivada por Admin":"Desactivada"}),!s.activaPorEmpresa&&s.active&&e.jsx("span",{className:" top-4 left-4 bg-yellow-500 text-white text-xs font-semibold px-2 py-1 rounded-full shadow-md",children:i==="empresa"?"Desactivada por ti":"Desactivada"}),s.candidatoPostulado&&s.estadoPostulacion!=="Cancelada"&&e.jsx("span",{className:`top-4 right-4 text-white text-xs font-semibold px-2 py-1 rounded-full shadow-md ${s.estadoPostulacion==="Aceptada"?"bg-green-500":s.estadoPostulacion==="Rechazada"?"bg-red-500":"bg-blue-500"}`,children:s.estadoPostulacion}),e.jsx("h3",{className:"title",children:s.titulo}),e.jsx("p",{className:"company",children:s.nameEmpresa})]})]}),e.jsxs("div",{className:"details",children:[e.jsxs("div",{className:"detail",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsx("span",{children:s.ciudad})]}),e.jsxs("div",{className:"detail",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("polyline",{points:"12 6 12 12 16 14"})]}),e.jsx("span",{children:s.tipo})]}),e.jsxs("div",{className:"detail",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon",children:[e.jsx("rect",{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}),e.jsx("path",{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"})]}),e.jsxs("span",{children:[s.experiencia," años"]})]}),e.jsxs("div",{className:"detail",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"icon",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]}),e.jsxs("span",{children:[s.nPostulados," postulados"]})]})]}),e.jsx("div",{className:"apply",children:e.jsx("span",{className:"apply-text",children:"Ver detalles"})})]}),i==="empresa"&&e.jsxs("div",{className:"apply",children:[e.jsx("a",{href:`/empleos/editar/${s.nvacantes}`,className:"btn btn-edit",children:"Editar"}),e.jsx("button",{onClick:()=>j(s.nvacantes,!s.activaPorEmpresa),className:`px-4 py-2 font-semibold rounded-lg shadow ${s.activaPorEmpresa?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"}`,children:s.activaPorEmpresa?"Desactivar":"Activar"})]})]},s.nvacantes))}),e.jsx(C,{currentPage:d,setCurrentPage:t,totalPages:p})]})};function B({filtersLocal:a,handleFilterChange:i,setFilters:t}){return e.jsx("div",{className:"search-container",children:e.jsxs("div",{className:"search-form",children:[e.jsxs("div",{className:"search-input-group",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"search-icon",children:[e.jsx("circle",{cx:"11",cy:"11",r:"8"}),e.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),e.jsx("input",{type:"text",placeholder:"Titulo de la vacante",name:"titulo",onChange:i,value:a.titulo||"",className:"search-input-sup"})]}),e.jsxs("div",{className:"search-input-group",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"search-icon",children:[e.jsx("path",{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}),e.jsx("circle",{cx:"12",cy:"10",r:"3"})]}),e.jsx("input",{type:"text",placeholder:"Ciudad",name:"ciudad",onChange:i,value:a.ciudad||"",className:"search-input-sup"})]}),e.jsx("button",{className:"btn btn-primary search-button",onClick:()=>t(a),children:"Buscar"})]})})}const W=({fetchUrl:a,rol:i})=>{const[t,d]=c.useState(1),[p,m]=c.useState(0),[j,s]=c.useState(1),[h,u]=c.useState({titulo:null,tipo:"todos",experiencia:null,modalidad:null,active:null,activaPorEmpresa:null,cargo:null,ciudad:null,sueldo:null,totalpostulaciones:null}),[x,l]=c.useState({titulo:null,tipo:"todos",experiencia:null,modalidad:null,active:null,activaPorEmpresa:null,cargo:null,ciudad:null,sueldo:null,totalpostulaciones:null}),[y,E]=c.useState([]),P=20,f=async()=>{try{const r=await fetch(`${a}?page=${t-1}&size=${P}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(h)}),n=await $(r);if(!n)return;E(n.vacantes||[]),m(n.totalElements),s(n.totalPage)}catch(r){console.error("Error cargando vacantes:",r)}};c.useEffect(()=>{f()},[h,t]);const w=r=>{const{name:n,value:o}=r.target;l(g=>({...g,[n]:o}))},k=r=>{const n=r.target.value;l(g=>({...g,estado:n}));const o={...x,estado:n,active:void 0,activaPorEmpresa:void 0};switch(n){case"activas":o.active=!0,o.activaPorEmpresa=!0;break;case"desactivadasAdmin":o.active=!1;break;case"pausadasEmpresa":o.activaPorEmpresa=!1;break}l(o),d(1)},b=()=>{l({titulo:null,tipo:null,experiencia:null,active:null,activaPorEmpresa:null,modalidad:null,cargo:null,ciudad:null,sueldo:null,totalpostulaciones:null})};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"page-header",children:e.jsx(B,{filtersLocal:x,handleFilterChange:w,setFilters:u})}),e.jsxs("div",{className:"content-container",children:[e.jsx(S,{filtersLocal:x,clearAllFilters:b,handleFilterChange:w,setFilters:u,rol:i,handleEstadoChange:k}),e.jsxs("div",{className:"jobs-container",children:[e.jsxs("div",{className:"jobs-header",children:[e.jsx("h2",{className:"jobs-title",children:"Empleos disponibles"}),e.jsxs("div",{className:"jobs-count",children:[p," empleos encontrados"]})]}),e.jsx(A,{jobs:y,rol:i,currentPage:t,setCurrentPage:d,totalPages:j,fetchAllJobs:f})]})]})]})};export{W as default};
