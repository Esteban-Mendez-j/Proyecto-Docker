import{j as e,A as R,S as c}from"./sweetalert2.all.BzjA5z2z.js";import{r as a}from"./index.BVOCwoKb.js";import{m as M}from"./ManejarRespuesta.Bd8-Nm9C.js";/* empty css                          */import{P as _}from"./Paginacion.DN2WiRaF.js";const ae=()=>{const[U,l]=a.useState([]),[H,K]=a.useState(0),[n,k]=a.useState(1),[i]=a.useState(10),[F,O]=a.useState(1),[z,Q]=a.useState(!0),[d,L]=a.useState(0),[u,p]=a.useState(""),[x,m]=a.useState(""),[h,b]=a.useState(""),[f,g]=a.useState(""),[v,y]=a.useState(""),[j,N]=a.useState(""),[S,w]=a.useState("todos"),[C,P]=a.useState("todos"),[s,D]=a.useState(!0),[E,T]=a.useState(0),[$,I]=a.useState(""),V=async()=>{try{const t={titulo:u,ciudad:h,nameEmpresa:v,tipo:S,isActive:s,totalpostulaciones:E},o=await fetch(`${R}/api/admin/listar/filtrovacantes?page=${n-1}&size=${i}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}),r=await M(o);L(r.totalElements),l(r.vacantes||[]),O(r.totalPages)}catch(t){console.error("Error:",t)}},q=()=>{p(x),b(f),y(j),w(C),T($)},G=()=>{p(null),b(null),y(null),w("todos"),T(0),m(""),g(""),N(""),P("todos"),I(0)};a.useEffect(()=>{V()},[n,i,u,h,v,S,s,E]);const A=async(t,o)=>{const{value:r}=await c.fire({title:`Escribe el motivo ${o?"de activación":"de desactivación"} de la vacante`,input:"text",inputLabel:"Comentario",inputPlaceholder:"Escribe aquí...",showCancelButton:!0,confirmButtonText:"Enviar"});if(!r)return c.fire("Cancelado","No se cambió el estado de la vacante.","info");try{if(!(await fetch(`${R}/api/admin/cambiar-estado/vacantes?nvacante=${t}&estado=${o}&comentario=${encodeURIComponent(r)}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include"})).ok)throw new Error("Error al cambiar el estado de la vacante");await c.fire("Éxito","El estado de la vacante fue actualizado.","success");const J=await(await V()).json();l(J.vacantes||[])}catch(B){console.error("Error al cambiar el estado de la vacante:",B),c.fire("Error","Ocurrió un error al cambiar el estado.","error")}};return e.jsxs("div",{className:"flex-1 max-w-7xl mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Gestión de Vacantes"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("input",{type:"text",placeholder:"Buscar Empresa...",value:j,onChange:t=>N(t.target.value),className:"w-44 py-2 pl-4 pr-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"text",placeholder:"Buscar por Ciudad...",value:f,onChange:t=>g(t.target.value),className:"w-44 py-2 pl-4 pr-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"text",placeholder:"Buscar por Título...",value:x,onChange:t=>m(t.target.value),className:"w-44 py-2 pl-4 pr-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsxs("select",{value:C,onChange:t=>P(t.target.value),className:"w-44 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"todos",children:"Todos los tipos"}),e.jsx("option",{value:"Vacante",children:"Vacante"}),e.jsx("option",{value:"Practica",children:"Práctica"})]}),e.jsx("input",{placeholder:"Buscar por Postulacion..",type:"number",value:$,onChange:t=>I(t.target.value),min:"0",className:"w-44 py-2 pl-4 pr-4 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{onClick:q,className:"px-4 py-2 text-white bg-blue-600 rounded-md hover:bg-blue-700",children:"Buscar"}),e.jsx("button",{onClick:()=>D(!s),className:"px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600",children:s?"Ver Baneados":"Ver Activos"}),e.jsx("button",{onClick:G,className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-gray-600",children:"Limpiar Filtros"})]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex -mb-px",children:s?e.jsxs("button",{className:"px-4 py-3 font-medium text-blue-600 border-b-2 border-blue-600 tab-button active",children:["Vacantes Activas (",d,")"]}):e.jsxs("button",{className:"px-4 py-3 font-medium text-blue-600 border-b-2 border-blue-600 tab-button active",children:["Vacantes Desactivadas (",d,")"]})})})}),e.jsx("div",{className:`tab-content transition-opacity duration-300 ${z?"opacity-100":"opacity-0"}`,children:e.jsxs("div",{className:"overflow-x-auto bg-white border border-gray-100 rounded-lg shadow-sm",children:[e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${s?"text-blue-900 uppercase":"text-red-900 uppercase"}`,children:"Título"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${s?"text-blue-900 uppercase":"text-red-900 uppercase"}`,children:"Empresa"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${s?"text-blue-900 uppercase":"text-red-900 uppercase"}`,children:"Ubicación"}),e.jsx("th",{className:`px-4 py-3 text-left text-xs font-semibold ${s?"text-blue-900 uppercase":"text-red-900 uppercase"}`,children:"Tipo"}),s?e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-blue-900 uppercase",children:"Postulaciones"}):e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-red-900 uppercase",children:"Motivo"}),e.jsx("th",{className:`px-4 py-3 text-right text-xs font-semibold ${s?"text-blue-900 uppercase":"text-red-900 uppercase"}`,children:"Acciones"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:U.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4",children:t.titulo}),e.jsx("td",{className:"px-4 py-4",children:t.nameEmpresa}),e.jsx("td",{className:"px-4 py-4",children:t.ciudad}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 inline-flex text-xs font-semibold rounded-full ${t.tipo==="Vacante"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:t.tipo})}),s?e.jsx("td",{className:"px-4 py-4",children:t.nPostulados}):e.jsx("td",{className:"px-4 py-4",children:t.comentarioAdmin}),e.jsxs("td",{className:"px-4 py-4 flex justify-center",children:[e.jsx("a",{href:`/empleos/${t.nvacantes}`,className:"mr-3 text-blue-600 hover:text-blue-900",children:"Ver"}),s?e.jsx("button",{className:"mr-3 text-red-600 hover:text-red-500",onClick:()=>A(t.nvacantes,!1),children:"Desactivar"}):e.jsx("button",{className:"mr-3 text-green-800 hover:text-green-500",onClick:()=>A(t.nvacantes,!0),children:"Reactivar"}),e.jsx("a",{href:`/postulados/${t.nvacantes}`,className:"text-blue-600 hover:text-blue-900",children:"Postulados"})]})]},t.nvacantes))})]}),e.jsx(_,{currentPage:n,setCurrentPage:k,totalPages:F})]})})]})};export{ae as default};
